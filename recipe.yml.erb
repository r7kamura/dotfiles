resources:
  <%- homebrew_package_names.each do |homebrew_package_name| -%>
  - type: package
    name: <%= homebrew_package_name %>
  <%- end -%>
  <%- homebrew_cask_package_names.each do |homebrew_cask_package_name| -%>
  - type: homebrew_cask
    name: <%= homebrew_cask_package_name %>
  <%- end -%>
  - type: rbenv_ruby
    version: 2.2.0
    global: true
  - type: defaults
    domain: com.apple.dock
    key: autohide
    value: 1
    notify:
      - restart_dock
  - type: defaults
    domain: com.apple.dock
    key: persistent-apps
    value: []
    notify:
      - restart_dock
  - type: defaults
    domain: com.apple.dock
    key: persistent-others
    value: []
    notify:
      - restart_dock
  - type: defaults
    key: AppleKeyboardUIMode
    value: 3
  - type: git
    repository: git@github.com:r7kamura/dotfiles.git
    path: /Users/r7kamura/src/github.com/r7kamura/dotfiles
  <%- dotfiles.each do |filename| -%>
  - type: symlink
    destination: /Users/r7kamura/src/github.com/r7kamura/dotfiles/linked/<%= filename %>
    source: /Users/r7kamura/<%= filename %>
  <%- end -%>
  - type: command
    check_script: /Applications/Karabiner.app/Contents/Library/bin/karabiner changed | grep -E "^repeat.wait=15$"
    script: /Applications/Karabiner.app/Contents/Library/bin/karabiner set repeat.wait 15
  - type: command
    check_script: /Applications/Karabiner.app/Contents/Library/bin/karabiner changed | grep -E "^repeat.initial_wait=0$"
    script: /Applications/Karabiner.app/Contents/Library/bin/karabiner set repeat.initial_wait 0
  - type: command
    check_script: test $SHELL = /bin/zsh
    script: sudo chsh -s /bin/zsh r7kamura
handlers:
  - type: command
    script: killall Dock
